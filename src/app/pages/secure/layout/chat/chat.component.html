<div id="head" class="py-3 lh-sm border-bottom">
  <strong class="mb-1">Members: {{ members() }} </strong>
</div>

<div id="conversation">
  @if (!last_page) {
    <div class="text-center py-1">
      <a href="javascript:void(0)" class="alert-link" (click)="loadMore()">Load more recent</a>
    </div>
  }

  @for (message of messages; track message) {
    <div class="row pt-2">
      @if (message.sender?.id === currentUser()?.id) {
        <div class="col-6"></div>
      }
      <div class="col-6">
        @if (message.type === "text") {
          @if (message.sender?.id === currentUser()?.id) {
            <div class="alert alert-success d-inline-block float-end" role="alert">
              {{ message.content }}
            </div>
          } @else {
            <div class="alert alert-primary d-inline-block" role="alert">
              {{ message.content }}
            </div>
          }
        } @else {
          <img [src]="message.content" alt="image" class="w-100"/>
        }
      </div>

      @if (message.sender?.id !== currentUser()?.id) {
        <div class="col-6"></div>
      }
    </div>
  }
</div>

<form id="reply" class="p-3 w-100" [formGroup]="form" (submit)="submit()">
  <div class="input-group">
    <app-upload/>
    <input class="form-control" placeholder="Write a message" formControlName="content"/>
  </div>
</form>
